<!--
* node-queue-lib
* Copyright(c) 2014 year Andrey Gromozdov
* License: MIT
-->

<!DOCTYPE html>
<html>
<head>
    <title>message queue example</title>

    <script src="queue.client.js"></script>

    <script>
        (function(){
            var url = 'http://localhost:8888';

            // create queue instance
            var queue = new queuelib.Queue( url, 'test-queue', 'broadcast' );

            // subscribe on 'Queue name' messages
            queue.subscribe(function (err, subscriber) {
                subscriber.on('data', function (data, accept) {
                    document.write(data);
                    accept(); // accept process message
                    queue.close();
                });
            });

            // publish message
            queue.publish('test');
        })();
    </script>
</head>
<body>

</body>
</html>